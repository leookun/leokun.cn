---
import { SITE } from "@config";
import Layout from "@layouts/Layout.astro";
import { GetStaticPaths } from "astro";

import getPosts from "@utils/getPosts";
export const getStaticPaths = (async () => {
  const posts = await getPosts();
  return posts.map(post => {
    console.log(post.slug.replace(/.+?\//, "/"));
    return {
      params: {
        slug: post.slug.replace(/.+?\//, "/"),
      },
      props: { post },
    };
  });
}) satisfies GetStaticPaths;
const { post } = Astro.props;

const { Content } = await post.render();
console.log(post);
// const { entry } = Astro.props;
---

<Layout title={`${post.data.title} | ${SITE.title}`}>
  <div class="container mx-auto prose">
    <h1 data-title class="!mb-.2in">{post.data.title}</h1>
    <Content />
  </div>
</Layout>
